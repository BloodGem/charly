function activaTablaCortesCaja() {

                $("#tablaCortesCaja").DataTable({
      "language": {

    "sProcessing":     "Procesando...",
    "sLengthMenu":     "Mostrar _MENU_ registros",
    "sZeroRecords":    "No se encontraron resultados",
    "sEmptyTable":     "No se encontraron resultados",
    "sInfo":           "Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",
    "sInfoEmpty":      "Mostrando registros del 0 al 0 de un total de 0 registros",
    "sInfoFiltered":   "(filtrado de un total de _MAX_ registros)",
    "sInfoPostFix":    "",
    "sSearch":         "Buscar:",
    "sUrl":            "",
    "sInfoThousands":  ",",
    "sLoadingRecords": "Cargandovistas.",
    "oPaginate": {
    "sFirst":    "Primero",
    "sLast":     "Último",
    "sNext":     "Siguiente",
    "sPrevious": "Anterior"
    },
    "oAria": {
      "sSortAscending":  ": Activar para ordenar la columna de manera ascendente",
      "sSortDescending": ": Activar para ordenar la columna de manera descendente"
    }

  },
      "responsive": false, 
      "lengthChange": false, 
      "autoWidth": true,
      "scrollX": true,
        order: [[1, 'desc']],
    });
  }










function activaTablaRetirosCorteCaja() {

    $("#tablaRetirosCorteCaja").DataTable({
      "language": {

        "sProcessing":     "Procesando...",
        "sLengthMenu":     "Mostrar _MENU_ registros",
        "sZeroRecords":    "No se encontraron resultados",
        "sEmptyTable":     "Ningún dato disponible en esta tabla",
        "sInfo":           "Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",
        "sInfoEmpty":      "Mostrando registros del 0 al 0 de un total de 0 registros",
        "sInfoFiltered":   "(filtrado de un total de _MAX_ registros)",
        "sInfoPostFix":    "",
        "sSearch":         "Buscar:",
        "sUrl":            "",
        "sInfoThousands":  ",",
        "sLoadingRecords": "Cargandovistas.",
        "oPaginate": {
            "sFirst":    "Primero",
            "sLast":     "Último",
            "sNext":     "Siguiente",
            "sPrevious": "Anterior"
        },
        "oAria": {
          "sSortAscending":  ": Activar para ordenar la columna de manera ascendente",
          "sSortDescending": ": Activar para ordenar la columna de manera descendente"
      }

  },
  "responsive": true, 
  "lengthChange": false, 
  "autoWidth": false,
  order: [[3, 'asc']],
});
}










function activaTablaRetirosBaulCorteCaja() {

    $("#tablaRetirosBaulCorteCaja").DataTable({
      "language": {

        "sProcessing":     "Procesando...",
        "sLengthMenu":     "Mostrar _MENU_ registros",
        "sZeroRecords":    "No se encontraron resultados",
        "sEmptyTable":     "Ningún dato disponible en esta tabla",
        "sInfo":           "Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",
        "sInfoEmpty":      "Mostrando registros del 0 al 0 de un total de 0 registros",
        "sInfoFiltered":   "(filtrado de un total de _MAX_ registros)",
        "sInfoPostFix":    "",
        "sSearch":         "Buscar:",
        "sUrl":            "",
        "sInfoThousands":  ",",
        "sLoadingRecords": "Cargandovistas.",
        "oPaginate": {
            "sFirst":    "Primero",
            "sLast":     "Último",
            "sNext":     "Siguiente",
            "sPrevious": "Anterior"
        },
        "oAria": {
          "sSortAscending":  ": Activar para ordenar la columna de manera ascendente",
          "sSortDescending": ": Activar para ordenar la columna de manera descendente"
      }

  },
  "responsive": true, 
  "lengthChange": false, 
  "autoWidth": false,
  order: [[3, 'asc']],
});
}









function activaTablaVentasCorteCaja() {

                $("#tablaVentasCorteCaja").DataTable({
      "language": {

    "sProcessing":     "Procesando...",
    "sLengthMenu":     "Mostrar _MENU_ registros",
    "sZeroRecords":    "No se encontraron resultados",
    "sEmptyTable":     "Ningún dato disponible en esta tabla",
    "sInfo":           "Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",
    "sInfoEmpty":      "Mostrando registros del 0 al 0 de un total de 0 registros",
    "sInfoFiltered":   "(filtrado de un total de _MAX_ registros)",
    "sInfoPostFix":    "",
    "sSearch":         "Buscar:",
    "sUrl":            "",
    "sInfoThousands":  ",",
    "sLoadingRecords": "Cargandovistas.",
    "oPaginate": {
    "sFirst":    "Primero",
    "sLast":     "Último",
    "sNext":     "Siguiente",
    "sPrevious": "Anterior"
    },
    "oAria": {
      "sSortAscending":  ": Activar para ordenar la columna de manera ascendente",
      "sSortDescending": ": Activar para ordenar la columna de manera descendente"
    }

  },
      "responsive": true, 
      "lengthChange": false, 
      "autoWidth": false,
        order: [[0, 'desc']],
    });
  }










function activaTablaDevolucionesCorteCaja() {

                $("#tablaDevolucionesCorteCaja").DataTable({
      "language": {

    "sProcessing":     "Procesando...",
    "sLengthMenu":     "Mostrar _MENU_ registros",
    "sZeroRecords":    "No se encontraron resultados",
    "sEmptyTable":     "Ningún dato disponible en esta tabla",
    "sInfo":           "Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",
    "sInfoEmpty":      "Mostrando registros del 0 al 0 de un total de 0 registros",
    "sInfoFiltered":   "(filtrado de un total de _MAX_ registros)",
    "sInfoPostFix":    "",
    "sSearch":         "Buscar:",
    "sUrl":            "",
    "sInfoThousands":  ",",
    "sLoadingRecords": "Cargandovistas.",
    "oPaginate": {
    "sFirst":    "Primero",
    "sLast":     "Último",
    "sNext":     "Siguiente",
    "sPrevious": "Anterior"
    },
    "oAria": {
      "sSortAscending":  ": Activar para ordenar la columna de manera ascendente",
      "sSortDescending": ": Activar para ordenar la columna de manera descendente"
    }

  },
      "responsive": true, 
      "lengthChange": false, 
      "autoWidth": false,
        order: [[0, 'desc']],
    });
  }









  function activaTablaGarantiasCorteCaja() {

                $("#tablaGarantiasCorteCaja").DataTable({
      "language": {

    "sProcessing":     "Procesando...",
    "sLengthMenu":     "Mostrar _MENU_ registros",
    "sZeroRecords":    "No se encontraron resultados",
    "sEmptyTable":     "Ningún dato disponible en esta tabla",
    "sInfo":           "Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",
    "sInfoEmpty":      "Mostrando registros del 0 al 0 de un total de 0 registros",
    "sInfoFiltered":   "(filtrado de un total de _MAX_ registros)",
    "sInfoPostFix":    "",
    "sSearch":         "Buscar:",
    "sUrl":            "",
    "sInfoThousands":  ",",
    "sLoadingRecords": "Cargandovistas.",
    "oPaginate": {
    "sFirst":    "Primero",
    "sLast":     "Último",
    "sNext":     "Siguiente",
    "sPrevious": "Anterior"
    },
    "oAria": {
      "sSortAscending":  ": Activar para ordenar la columna de manera ascendente",
      "sSortDescending": ": Activar para ordenar la columna de manera descendente"
    }

  },
      "responsive": true, 
      "lengthChange": false, 
      "autoWidth": false,
        order: [[0, 'desc']],
    });
  }







function buscarAhoraCortesCaja(buscarCortesCaja) {

    document.getElementById("incrustarTablaCortesCaja").innerHTML = "";

    var parametros = {"buscarCortesCaja":buscarCortesCaja};
    $.ajax({
        data:parametros,
        type: 'POST',
        url: 'vistas/modulos/buscadores/buscadorCortesCaja.php',
        success: function(data) {
            document.getElementById("incrustarTablaCortesCaja").innerHTML = data;

            activaTablaCortesCaja();
        }
    });
}










//AL PRESIONAR ESC
$(document).keydown(function(event) {
    if (event.which === 27)
    {
        event.preventDefault();
        var buscador_esc = $("#buscarCortesCaja").attr("teclaEsc");
        if(buscador_esc == "si"){
            $("#buscarCortesCaja").val("");
            $("#buscarCortesCaja").focus();
        }else{
            $(".close").trigger('click');
            
            $("#buscarCortesCaja").attr("teclaEsc", "si");

        }

    }
});










//AL PRESIONAR CTRL + |
$(document).keydown(function(event) {
    if (event.ctrlKey && event.which === 220)
    {

        event.preventDefault();
        
        $(".close").trigger('click');
        
        $("#buscarCortesCaja").attr("teclaEsc", "si");     

    }
});










//AL PRESIONAR F1 PARA CREAR
$(document).keydown(function(event) {
    if (event.which === 112)
    {
        event.preventDefault();
        $("#btnCrearCorte").trigger('click');

        

    }
});








//AL PRESIONAR F4 PARA VER EL CORTE
$(document).keydown(function(event) {
    if (event.which === 115)
    {
        event.preventDefault();
        $(".close").trigger('click');

        const verifica_foco = document.getElementsByClassName("foco");

        var foco = verifica_foco[0];


        if(foco !== undefined && foco !== null){

            var contador_actual = $(foco).attr("contador");

            $(foco).parent().parent().children(".botones").children(".btn-group").children(".btnVerCorteCaja").trigger("click"); 

            //$(".close").hide();

            $("#buscarCortesCaja").attr("teclaEsc", "no");

        }

        

    }
});





//AL PRESIONAR F5 PARA CONFIRMAR EL CORTE DE CAJA
$(document).keydown(function(event) {
    if (event.which === 116)
    {
        event.preventDefault();
        $(".close").trigger('click');

        const verifica_foco = document.getElementsByClassName("foco");

        var foco = verifica_foco[0];


        if(foco !== undefined && foco !== null){

            var contador_actual = $(foco).attr("contador");

            $(foco).parent().parent().children(".botones").children(".btn-group").children(".btnConfirmarCorteCaja").trigger("click"); 

        ////$(".close").hide();

        //$("#buscarCortesCaja").attr("teclaEsc", "no");

        }

        

    }
});










//AL PRESIONAR F2 PARA EDITAR
$(document).keydown(function(event) {
    if (event.which === 117)
    {
        event.preventDefault();
        $(".close").trigger('click');

        const verifica_foco = document.getElementsByClassName("foco");

        var foco = verifica_foco[0];


        if(foco !== undefined && foco !== null){

            var contador_actual = $(foco).attr("contador");

            $(foco).parent().parent().children(".botones").children(".btn-group").children(".btnVerRetirosCorteCaja").trigger("click"); 

            //$(".close").hide();

            $("#buscarCortesCaja").attr("teclaEsc", "no");

        }

        

    }
});









//AL PRESIONAR CTRL + FLECHA ABAJO
$(document).keydown(function(event) {
    if (event.ctrlKey && event.which === 40)
    {
        var buscador_esc = $("#buscarCortesCaja").attr("teclaEsc");
        if(buscador_esc == "si"){
            const verifica_foco = document.getElementsByClassName("foco");

            var foco = verifica_foco[0];

        //alert("foco "+foco);

            if(foco == null){
                const items = document.getElementsByClassName("guardaFoco1"); 

                var contador_actual = $(items[0]).attr("contador");

                contador_actual = parseInt(contador_actual);

            //alert("contador actual: "+contador_actual);

                $(items[0]).addClass("foco");
                $(items[0]).focus();
                $(items[0]).parent().parent().parent().children(".contador"+contador_actual).attr("style","font-weight: bold; background-color: #F2620F; color: #0208C9;");
                
            }else{

                setTimeout(function() { 

            //alert("si hay foco");


                    var contador_actual = $(foco).attr("contador");

                    contador_actual = parseInt(contador_actual);

                    var contador_mas = contador_actual + 1;

                    var contador_menos = contador_actual - 1;

                    const verifica_foco_mas = document.getElementsByClassName("guardaFoco"+contador_mas);

                    var foco_mas = verifica_foco_mas[0];

                    const verifica_foco_menos = document.getElementsByClassName("guardaFoco"+contador_menos);

                    var foco_menos = verifica_foco_menos[0];

                    $(foco).removeClass("foco");

                    $(foco).parent().parent().removeAttr("style");

                    $(foco_menos).parent().parent().removeAttr("style");

                    $(foco_mas).parent().parent().attr("style","font-weight: bold; background-color: #F2620F; color: #0208C9;");

                    $(foco_mas).addClass('foco');
                    $(foco_mas).focus();
            //$(foco).focus();

                }, 100);
            }
            
        //alert('Ctrl + flecha abajo!');
        }

    }
});









//AL PRESIONAR CTRL + FLECHA ARRIBA
$(document).keydown(function(event) {
    if (event.ctrlKey && event.which === 38)
    {
        var buscador_esc = $("#buscarCortesCaja").attr("teclaEsc");
        if(buscador_esc == "si"){
            const verifica_foco = document.getElementsByClassName("foco");

            var foco = verifica_foco[0];

        //alert("foco "+foco);

            if(foco == null){
                const items = document.getElementsByClassName("guardaFoco1"); 

                var contador_actual = $(items[0]).attr("contador");

                contador_actual = parseInt(contador_actual);

            //alert("contador actual: "+contador_actual);

                $(items[0]).addClass("foco");
                $(items[0]).focus();
                $(items[0]).parent().parent().parent().children(".contador"+contador_actual).attr("style","font-weight: bold; background-color: #F2620F; color: #0208C9;");
                
            }else{

                setTimeout(function() { 

            //alert("si hay foco");


                    var contador_actual = $(foco).attr("contador");

                    contador_actual = parseInt(contador_actual);

                    var contador_mas = contador_actual + 1;

                    var contador_menos = contador_actual - 1;

                    const verifica_foco_mas = document.getElementsByClassName("guardaFoco"+contador_mas);

                    var foco_mas = verifica_foco_mas[0];

                    const verifica_foco_menos = document.getElementsByClassName("guardaFoco"+contador_menos);

                    var foco_menos = verifica_foco_menos[0];

                    $(foco).removeClass("foco");

                    $(foco).parent().parent().removeAttr("style");

                    $(foco_mas).parent().parent().removeAttr("style");

                    $(foco_menos).parent().parent().attr("style","font-weight: bold; background-color: #F2620F; color: #0208C9;");

                    $(foco_menos).addClass('foco');
                    $(foco_menos).focus();
            //$(foco).focus();

                }, 100);
            }
            
        //alert('Ctrl + flecha abajo!');
        }
    }
});










/*=============================================
CREAR CORTE
=============================================*/
$(document).on("click", "#btnCrearCorte", function(){




    var id_usuario = $(this).attr("id_usuario");

    var datos = new FormData();
    datos.append("id_usuario", id_usuario);

    $.ajax({
        url: "ajax/cajas.ajax.php",
        method: "POST",
        data: datos,
        cache: false,
        contentType: false,
        processData: false,
        success: function(respuesta){

            if (respuesta == 0) {
                Swal.fire({
                  title: 'Estas segur@?',
                  text: "Quieres crear un corte de caja?",
                  icon: 'warning',
                  showCancelButton: true,
                  confirmButtonColor: '#3085d6',
                  cancelButtonColor: '#d33',
                  confirmButtonText: 'Si'
              }).then(function(result){

                if(result.value){
                     var crearCorteCaja = new FormData();
                     crearCorteCaja.append("id_usuario2", id_usuario);
                     crearCorteCaja.append("apertura", 0);

                     $.ajax({
                        url: "ajax/cajas.ajax.php",
                        method: "POST",
                        data: crearCorteCaja,
                        cache: false,
                        contentType: false,
                        processData: false,
                        success: function(respuestaCrearCorteCaja){
                            if(respuestaCrearCorteCaja != "error"){


                              Swal.fire({
                                  icon: 'success',
                                  title: 'Se ha creado con exito la apertura de su caja',
                                  showConfirmButton: false,
                                  timer: 2500
                              }).then(function(result){
                                window.location = 'caja';
                            });

                              
                          }else{

                            alert("error");
                        }
                    }

                });

                 


                }

                  });//Swal par la pregunta de si se desea crear un corte
          }else{
            Swal.fire({
                icon: 'error',
                title: 'Ya hay un corte de caja abierto',
                showConfirmButton: false,
                timer: 2000
            })
        }

    }

})

    


})












/*=============================================
VER CORTE
=============================================*/
$(document).on("click", ".btnVerCorteCaja", function(){

  //$(".close").hide();

  $("#buscarCortesCaja").attr("teclaEsc", "no");

  id_corte_caja = $(this).attr("id_corte_caja");
  
  
  
  
  $("#btnRefrescarVerCorteCaja").attr("id_corte_caja",id_corte_caja);
  
  
  
  
  var datosTotalRetiros = new FormData();
  datosTotalRetiros.append("id_corte_caja_total_retiros", id_corte_caja);

  $.ajax({
    url: "ajax/cajas.ajax.php",
    method: "POST",
    data: datosTotalRetiros,
    cache: false,
    contentType: false,
    processData: false,
    dataType:"json",
    success: function(respuestaTotalRetiros){

        var suma_importes_retiros = respuestaTotalRetiros["sumaImportesRetiros"];
        
        if(suma_importes_retiros == null){
         suma_importes_retiros = 0;
     }

     $("#totalRetirosVCC").val(suma_importes_retiros).number(true, 2);

 }

});



  var suma_importes_retiros_baul = 0;

  /*var datosTotalRetirosBaul = new FormData();
  datosTotalRetirosBaul.append("id_corte_caja_total_retiros_baul", id_corte_caja);

  $.ajax({
    url: "ajax/cajas.ajax.php",
    method: "POST",
    data: datosTotalRetirosBaul,
    cache: false,
    contentType: false,
    processData: false,
    dataType:"json",
    success: function(respuestaTotalRetirosBaul){

        var suma_importes_retiros_baul = respuestaTotalRetirosBaul["sumaImportesRetirosBaul"];
        
        if(suma_importes_retiros_baul == null){
         suma_importes_retiros_baul = 0;
     }

     $("#totalRetirosBaulVCC").val(suma_importes_retiros_baul).number(true, 2);

 }

});*/




  var total_tarjeta_debito_retiros = 0;

  /*var datosTotalTarjetaDebitoRetiros = new FormData();
  datosTotalTarjetaDebitoRetiros.append("id_corte_caja_total_tarjeta_debito_retiros", id_corte_caja);

  $.ajax({
    url: "ajax/cajas.ajax.php",
    method: "POST",
    data: datosTotalTarjetaDebitoRetiros,
    cache: false,
    contentType: false,
    processData: false,
    dataType:"json",
    success: function(respuestaTotalTarjetaDebitoRetiros){

        var total_tarjeta_debito_retiros = respuestaTotalTarjetaDebitoRetiros["sumaImportesRetiros"];
        
        if(total_tarjeta_debito_retiros == null){
         total_tarjeta_debito_retiros = 0;
     }

     $("#totalTarjetaDebitoRetiros").val(total_tarjeta_debito_retiros).number(true, 2);

 }

});*/






  //Traemos las devoluciones de la caja
  var datosTotalDevoluciones = new FormData();
  datosTotalDevoluciones.append("id_corte_caja_total_devoluciones", id_corte_caja);

  $.ajax({
    url: "ajax/cajas.ajax.php",
    method: "POST",
    data: datosTotalDevoluciones,
    cache: false,
    contentType: false,
    processData: false,
    dataType:"json",
    success: function(respuestaTotalDevoluciones){

        //console.log(respuestaTotalDevoluciones);

        var suma_importes_devoluciones = respuestaTotalDevoluciones["sumaImportesDevoluciones"];
        
        if(suma_importes_devoluciones == null){
         suma_importes_devoluciones = 0;
     }

     $("#totalDevolucionesVCC").val(suma_importes_devoluciones).number(true, 2);

 }

});





  //Traemos las garantias de la caja
  var datosTotalGarantias = new FormData();
  datosTotalGarantias.append("id_corte_caja_total_garantias", id_corte_caja);

  $.ajax({
    url: "ajax/cajas.ajax.php",
    method: "POST",
    data: datosTotalGarantias,
    cache: false,
    contentType: false,
    processData: false,
    dataType:"json",
    success: function(respuestaTotalGarantias){

        var suma_importes_garantias = respuestaTotalGarantias["sumaImportesGarantias"];
        
        if(suma_importes_garantias == null){
         suma_importes_garantias = 0;
     }

     $("#totalGarantiasVCC").val(suma_importes_garantias).number(true, 2);

 }

});
  
  


  var datos = new FormData();
  datos.append("id_corte_caja", id_corte_caja);

  $.ajax({
    url: "ajax/cajas.ajax.php",
    method: "POST",
    data: datos,
    cache: false,
    contentType: false,
    processData: false,
    dataType:"json",
    success: function(respuesta){


        $("#mostrarIdCorteCaja").val(respuesta["id_corte_caja"]);
        $("#mostrarFechaCorteCaja").val(respuesta["fecha_creacion"]);
        
        $("#mostrarAperturaCorteCaja").val(respuesta["apertura"]);
        
        $("#mostrarAperturaCorteCaja").val(respuesta["apertura"]);
        
        $("#mostrarAperturaVCC").val(respuesta["apertura"]);
        
        $("#cantidadCentavos").val(respuesta["c0"]);
        $("#cantidadUnPeso").val(respuesta["c1"]);
        $("#cantidadDosPesos").val(respuesta["c2"]);
        $("#cantidadCincoPesos").val(respuesta["c5"]);
        $("#cantidadDiezPesos").val(respuesta["c10"]);
        $("#cantidadVeintePesos").val(respuesta["c20"]);
        $("#cantidadCincuentaPesos").val(respuesta["c50"]);
        $("#cantidadCienPesos").val(respuesta["c100"]);
        $("#cantidadDoscientosPesos").val(respuesta["c200"]);
        $("#cantidadQuinientosPesos").val(respuesta["c500"]);
        $("#cantidadMilPesos").val(respuesta["c1000"]);

        calcularTotalesEfectivo();

        calcularEfectivo();



        if (respuesta["estatus"] == 1) {
            $("#btnSubmitEditarCorteCaja").attr("disabled", true);

          $(".btnCrearRetiroCorteCaja").attr("disabled", true);
          $("#cantidadCentavos").attr("disabled", true);
        $("#cantidadUnPeso").attr("disabled", true);
        $("#cantidadDosPesos").attr("disabled", true);
        $("#cantidadCincoPesos").attr("disabled", true);
        $("#cantidadDiezPesos").attr("disabled", true);
        $("#cantidadVeintePesos").attr("disabled", true);
        $("#cantidadCincuentaPesos").attr("disabled", true);
        $("#cantidadCienPesos").attr("disabled", true);
        $("#cantidadDoscientosPesos").attr("disabled", true);
        $("#cantidadQuinientosPesos").attr("disabled", true);
        $("#cantidadMilPesos").attr("disabled", true);
      }else{

        $("#btnSubmitEditarCorteCaja").attr("disabled", false);

        $(".btnCrearRetiroCorteCaja").attr("disabled", false);
          $("#cantidadCentavos").attr("disabled", false);
        $("#cantidadUnPeso").attr("disabled", false);
        $("#cantidadDosPesos").attr("disabled", false);
        $("#cantidadCincoPesos").attr("disabled", false);
        $("#cantidadDiezPesos").attr("disabled", false);
        $("#cantidadVeintePesos").attr("disabled", false);
        $("#cantidadCincuentaPesos").attr("disabled", false);
        $("#cantidadCienPesos").attr("disabled", false);
        $("#cantidadDoscientosPesos").attr("disabled", false);
        $("#cantidadQuinientosPesos").attr("disabled", false);
        $("#cantidadMilPesos").attr("disabled", false);

        

      }


    }

})
  
  
  
  
  
  var datosTotales = new FormData();
  datosTotales.append("id_corte_caja_totales", id_corte_caja);

  $.ajax({
    url: "ajax/cajas.ajax.php",
    method: "POST",
    data: datosTotales,
    cache: false,
    contentType: false,
    processData: false,
    dataType:"json",
    success: function(respuestaTotales){

     var apertura = $("#mostrarAperturaCorteCaja").val();

     var suma_importes_retiros = $("#totalRetirosVCC").val();

     var suma_importes_retiros_baul = $("#totalRetirosBaulVCC").val();


     var suma_importes_devoluciones = $("#totalDevolucionesVCC").val();


     var suma_importes_garantias = $("#totalGarantiasVCC").val();


     var suma_efectivo_ventas = respuestaTotales["sumaEfectivoVentas"];

     var suma_tarjeta_debito_ventas = respuestaTotales["sumaTarjetaDebitoVentas"];

     var suma_tarjeta_credito_ventas = respuestaTotales["sumaTarjetaCreditoVentas"];

     var suma_transferencia_ventas = respuestaTotales["sumaTransferenciaVentas"];

     var total_ventas = Number(suma_efectivo_ventas) + Number(suma_tarjeta_credito_ventas) + Number(suma_tarjeta_debito_ventas) + Number(suma_transferencia_ventas);

     //total_ventas = total_ventas.toFixed(2);
     /*suma_efectivo_ventas = suma_efectivo_ventas.toFixed(2);

     suma_tarjeta_debito_ventas = suma_tarjeta_debito_ventas.toFixed(2);

     suma_tarjeta_credito_ventas = suma_tarjeta_credito_ventas.toFixed(2);

     suma_transferencia_ventas = suma_transferencia_ventas.toFixed(2);

     total_ventas = total_ventas.toFixed(2);*/

     $("#totalEfectivoVentas").val(suma_efectivo_ventas).number(true, 2);

     $("#totalTarjetaDebitoVentas").val(suma_tarjeta_debito_ventas).number(true, 2);
     $("#totalTarjetaCreditoVentas").val(suma_tarjeta_credito_ventas).number(true, 2);
     $("#totalTransferenciaVentas").val(suma_transferencia_ventas).number(true, 2);
     $("#totalVentasVCC").val(total_ventas).number(true, 2);

     //$("#totalEfectivoVentas2").val(suma_efectivo_ventas).number(true, 2);
     $("#totalEfectivoVentasVCC").val(suma_efectivo_ventas).number(true, 2);


     var total_corte_vcc = Number(apertura) + Number(suma_efectivo_ventas) - Number(suma_importes_retiros) - Number(suma_importes_retiros_baul) - Number(suma_importes_devoluciones) - Number(suma_importes_garantias);
     //total_corte_vcc = total_corte_vcc.toFixed(2);
     $("#totalCorteVCC").val(total_corte_vcc).number(true, 2);

     var pesos_billetes = $("#totalEfectivo").val();  
     var diferencia = total_corte_vcc - pesos_billetes;

      $("#totalDiferenciaCC").val(diferencia).number(true, 2);
 }

})

});







/*=============================================
VER CORTE
=============================================*/
$(document).on("click", "#btnRefrescarVerCorteCaja", function(){

  id_corte_caja = $(this).attr("id_corte_caja");
  
  
  
  var datosTotalRetiros = new FormData();
  datosTotalRetiros.append("id_corte_caja_total_retiros", id_corte_caja);

  $.ajax({
    url: "ajax/cajas.ajax.php",
    method: "POST",
    data: datosTotalRetiros,
    cache: false,
    contentType: false,
    processData: false,
    dataType:"json",
    success: function(respuestaTotalRetiros){

        var suma_importes_retiros = respuestaTotalRetiros["sumaImportesRetiros"];
        
        if(suma_importes_retiros == null){
         suma_importes_retiros = 0;
     }

     $("#totalRetirosVCC").val(suma_importes_retiros).number(true, 2);

 }

});



  var suma_importes_retiros_baul = 0;

  /*var datosTotalRetirosBaul = new FormData();
  datosTotalRetirosBaul.append("id_corte_caja_total_retiros_baul", id_corte_caja);

  $.ajax({
    url: "ajax/cajas.ajax.php",
    method: "POST",
    data: datosTotalRetirosBaul,
    cache: false,
    contentType: false,
    processData: false,
    dataType:"json",
    success: function(respuestaTotalRetirosBaul){

        var suma_importes_retiros_baul = respuestaTotalRetirosBaul["sumaImportesRetirosBaul"];
        
        if(suma_importes_retiros_baul == null){
         suma_importes_retiros_baul = 0;
     }

     $("#totalRetirosBaulVCC").val(suma_importes_retiros_baul).number(true, 2);

 }

});*/




  var total_tarjeta_debito_retiros = 0;

  /*var datosTotalTarjetaDebitoRetiros = new FormData();
  datosTotalTarjetaDebitoRetiros.append("id_corte_caja_total_tarjeta_debito_retiros", id_corte_caja);

  $.ajax({
    url: "ajax/cajas.ajax.php",
    method: "POST",
    data: datosTotalTarjetaDebitoRetiros,
    cache: false,
    contentType: false,
    processData: false,
    dataType:"json",
    success: function(respuestaTotalTarjetaDebitoRetiros){

        var total_tarjeta_debito_retiros = respuestaTotalTarjetaDebitoRetiros["sumaImportesRetiros"];
        
        if(total_tarjeta_debito_retiros == null){
         total_tarjeta_debito_retiros = 0;
     }

     $("#totalTarjetaDebitoRetiros").val(total_tarjeta_debito_retiros).number(true, 2);

 }

});*/





  //Traemos las devoluciones de la caja
  var datosTotalDevoluciones = new FormData();
  datosTotalDevoluciones.append("id_corte_caja_total_devoluciones", id_corte_caja);

  $.ajax({
    url: "ajax/cajas.ajax.php",
    method: "POST",
    data: datosTotalDevoluciones,
    cache: false,
    contentType: false,
    processData: false,
    dataType:"json",
    success: function(respuestaTotalDevoluciones){

        var suma_importes_devoluciones = respuestaTotalDevoluciones["sumaImportesDevoluciones"];
        
        if(suma_importes_devoluciones == null){
         suma_importes_devoluciones = 0;
     }

     $("#totalDevolucionesVCC").val(suma_importes_devoluciones).number(true, 2);

 }

});





  //Traemos las garantias de la caja
  var datosTotalGarantias = new FormData();
  datosTotalGarantias.append("id_corte_caja_total_garantias", id_corte_caja);

  $.ajax({
    url: "ajax/cajas.ajax.php",
    method: "POST",
    data: datosTotalGarantias,
    cache: false,
    contentType: false,
    processData: false,
    dataType:"json",
    success: function(respuestaTotalGarantias){

        var suma_importes_garantias = respuestaTotalGarantias["sumaImportesGarantias"];
        
        if(suma_importes_garantias == null){
         suma_importes_garantias = 0;
     }

     $("#totalGarantiasVCC").val(suma_importes_garantias).number(true, 2);

 }

});

  


  var datos = new FormData();
  datos.append("id_corte_caja", id_corte_caja);

  $.ajax({
    url: "ajax/cajas.ajax.php",
    method: "POST",
    data: datos,
    cache: false,
    contentType: false,
    processData: false,
    dataType:"json",
    success: function(respuesta){




        $("#mostrarIdCorteCaja").val(respuesta["id_corte_caja"]);
        $("#mostrarFechaCorteCaja").val(respuesta["fecha_creacion"]);
        
        
        $("#mostrarAperturaCorteCaja").val(respuesta["apertura"]);
        
        $("#mostrarAperturaCorteCaja").val(respuesta["apertura"]);
        
        $("#mostrarAperturaVCC").val(respuesta["apertura"]);
        
        $("#cantidadCentavos").val(respuesta["c0"]);
        $("#cantidadUnPeso").val(respuesta["c1"]);
        $("#cantidadDosPesos").val(respuesta["c2"]);
        $("#cantidadCincoPesos").val(respuesta["c5"]);
        $("#cantidadDiezPesos").val(respuesta["c10"]);
        $("#cantidadVeintePesos").val(respuesta["c20"]);
        $("#cantidadCincuentaPesos").val(respuesta["c50"]);
        $("#cantidadCienPesos").val(respuesta["c100"]);
        $("#cantidadDoscientosPesos").val(respuesta["c200"]);
        $("#cantidadQuinientosPesos").val(respuesta["c500"]);
        $("#cantidadMilPesos").val(respuesta["c1000"]);

        calcularTotalesEfectivo();

        calcularEfectivo();


    }

})
  
  
  
  
  
  var datosTotales = new FormData();
  datosTotales.append("id_corte_caja_totales", id_corte_caja);

  $.ajax({
    url: "ajax/cajas.ajax.php",
    method: "POST",
    data: datosTotales,
    cache: false,
    contentType: false,
    processData: false,
    dataType:"json",
    success: function(respuestaTotales){

      var apertura = $("#mostrarAperturaCorteCaja").val();
      
      var suma_importes_retiros = $("#totalRetirosVCC").val();

      var suma_importes_retiros_baul = $("#totalRetirosBaulVCC").val();

      var suma_importes_devoluciones = $("#totalDevolucionesVCC").val();
      
      var suma_importes_garantias = $("#totalGarantiasVCC").val();

      var suma_efectivo_ventas = respuestaTotales["sumaEfectivoVentas"];

      var suma_tarjeta_debito_ventas = respuestaTotales["sumaTarjetaDebitoVentas"];

      var suma_tarjeta_credito_ventas = respuestaTotales["sumaTarjetaCreditoVentas"];

      var suma_transferencia_ventas = respuestaTotales["sumaTransferenciaVentas"];

      var total_ventas = Number(suma_efectivo_ventas) + Number(suma_tarjeta_credito_ventas) + Number(suma_tarjeta_debito_ventas) + Number(suma_transferencia_ventas);

      
      $("#totalEfectivoVentas").val(suma_efectivo_ventas).number(true, 2);
      $("#totalTarjetaDebitoVentas").val(suma_tarjeta_debito_ventas).number(true, 2);
      $("#totalTarjetaCreditoVentas").val(suma_tarjeta_credito_ventas).number(true, 2);
      $("#totalTransferenciaVentas").val(suma_transferencia_ventas).number(true, 2);
      $("#totalVentasVCC").val(total_ventas).number(true, 2);
      
      $("#totalEfectivoVentasVCC").val(suma_efectivo_ventas).number(true, 2);
      

      var total_corte_vcc = Number(apertura) + Number(suma_efectivo_ventas) - Number(suma_importes_retiros) - Number(suma_importes_retiros_baul) - Number(suma_importes_devoluciones) - Number(suma_importes_garantias);
      $("#totalCorteVCC").val(total_corte_vcc).number(true, 2);


      var diferencia = Number(total_corte_vcc);

      $("#totalDiferenciaCC").val(diferencia);
  }

})

});










/*=============================================
CONFIRMAR CORTE CAJA
=============================================*/
$(document).on("click", ".btnConfirmarCorteCaja", function(){

   var id_corte_caja2 = $(this).attr("id_corte_caja");

   Swal.fire({
      title: 'Estas segur@?',
      text: "Quieres confirmar el corte de caja?",
      icon: 'warning',
      showCancelButton: true,
      confirmButtonColor: '#3085d6',
      cancelButtonColor: '#d33',
      confirmButtonText: 'Si'
  }).then(function(result){


      if(result.value){

        var confirmarCorteCaja = new FormData();
        confirmarCorteCaja.append("id_corte_caja2", id_corte_caja2);

        $.ajax({
            url: "ajax/cajas.ajax.php",
            method: "POST",
            data: confirmarCorteCaja,
            cache: false,
            contentType: false,
            processData: false,
            success: function(respuestaConfirmarCorteCaja){
                if(respuestaConfirmarCorteCaja == "ok"){


                  Swal.fire({
                      icon: 'success',
                      title: 'El corte de caja ha sido confirmado con exito',
                      showConfirmButton: false,
                      timer: 2000
                  }).then(function(result){
                      window.location = 'caja';
                  });

              }else{

                alert("error");
            }
        }

    });

    }






})

})










$(document).on("click", ".btnVerRetirosCorteCaja", function(){

  //$(".close").hide();

  $("#buscarCortesCaja").attr("teclaEsc", "no");

  var id_corte_caja3 = $(this).attr("id_corte_caja");
  

  var datos = new FormData();
  datos.append("id_corte_caja", id_corte_caja3);

  $.ajax({
      url: "ajax/cajas.ajax.php",
      method: "POST",
      data: datos,
      cache: false,
      contentType: false,
      processData: false,
      async : false,
      dataType:"json",
      success: function(respuesta){

        if (respuesta["estatus"] == 1) {
          $(".btnCrearRetiroCorteCaja").attr("disabled", true);
      }

  }

});
  
  
  
  var datosTotalRetiros = new FormData();
  datosTotalRetiros.append("id_corte_caja_total_retiros", id_corte_caja3);
  
  
  var suma_importes_retiros = "";
  
  $.ajax({
    url: "ajax/cajas.ajax.php",
    method: "POST",
    data: datosTotalRetiros,
    cache: false,
    contentType: false,
    processData: false,
    async : false,
    dataType:"json",
    success: function(respuestaTotalRetiros){

        suma_importes_retiros = respuestaTotalRetiros["sumaImportesRetiros"];
        
        if(suma_importes_retiros == null){
         suma_importes_retiros = 0;
     }

     $("#totalRetirosVRCC").val(suma_importes_retiros);


 }



});





  var datosTotalRetirosBaul = new FormData();
  datosTotalRetirosBaul.append("id_corte_caja_total_retiros_baul", id_corte_caja3);
  
  
  var suma_importes_retiros_baul = "";
  
  $.ajax({
    url: "ajax/cajas.ajax.php",
    method: "POST",
    data: datosTotalRetirosBaul,
    cache: false,
    contentType: false,
    processData: false,
    async : false,
    dataType:"json",
    success: function(respuestaTotalRetirosBaul){

        suma_importes_retiros_baul = respuestaTotalRetirosBaul["sumaImportesRetirosBaul"];
        
        if(suma_importes_retiros_baul == null){
         suma_importes_retiros_baul = 0;
     }

     $("#totalRetirosBaulVRCC").val(suma_importes_retiros_baul);


 }



});





  var datosTotalDevoluciones = new FormData();
  datosTotalDevoluciones.append("id_corte_caja_total_devoluciones", id_corte_caja3);
  
  
  var suma_importes_devoluciones = "";
  
  $.ajax({
    url: "ajax/cajas.ajax.php",
    method: "POST",
    data: datosTotalDevoluciones,
    cache: false,
    contentType: false,
    processData: false,
    async : false,
    dataType:"json",
    success: function(respuestaTotalDevoluciones){

        suma_importes_devoluciones = respuestaTotalDevoluciones["sumaImportesDevoluciones"];
        
        if(suma_importes_devoluciones == null){
         suma_importes_devoluciones = 0;
     }

     $("#totalDevolucionesVRCC").val(suma_importes_devoluciones);


 }



});





  var datosTotalGarantias = new FormData();
  datosTotalGarantias.append("id_corte_caja_total_garantias", id_corte_caja3);
  
  
  var suma_importes_garantias = "";
  
  $.ajax({
    url: "ajax/cajas.ajax.php",
    method: "POST",
    data: datosTotalGarantias,
    cache: false,
    contentType: false,
    processData: false,
    async : false,
    dataType:"json",
    success: function(respuestaTotalGarantias){

        suma_importes_garantias = respuestaTotalGarantias["sumaImportesGarantias"];
        
        if(suma_importes_garantias == null){
         suma_importes_garantias = 0;
     }

     $("#totalGarantiasVRCC").val(suma_importes_garantias);


 }



});
  


  var apertura = "";

  var datos = new FormData();
  datos.append("id_corte_caja", id_corte_caja3);

  $.ajax({
    url: "ajax/cajas.ajax.php",
    method: "POST",
    data: datos,
    cache: false,
    contentType: false,
    processData: false,
    async : false,
    dataType:"json",
    success: function(respuesta){

      apertura = respuesta["apertura"];
      
      $("#mostrarAperturaVRCC").val(respuesta["apertura"]);
      
      

  }

})
  
  
  
  
  
  var datosTotales = new FormData();
  datosTotales.append("id_corte_caja_totales", id_corte_caja3);

  $.ajax({
    url: "ajax/cajas.ajax.php",
    method: "POST",
    data: datosTotales,
    cache: false,
    contentType: false,
    processData: false,
    async : false,
    dataType:"json",
    success: function(respuestaTotales){

        var suma_efectivo_ventas = respuestaTotales["sumaEfectivoVentas"];
        
        
        var operacion = Number(apertura) + Number(suma_efectivo_ventas) - Number(suma_importes_retiros) - Number(suma_importes_retiros_baul) - Number(suma_importes_devoluciones) - Number(suma_importes_garantias);
        
        operacion = operacion.toFixed(2);
        
        $("#mostrarEfectivoDisponible").val(operacion);


    }

})

  

  $("#mostrarIdCorteCajaVRCC").val(id_corte_caja3);
  
  $(".btnCrearRetiroCorteCaja").attr("id_corte_caja",id_corte_caja3);

  document.getElementById("incrustarTablaRetirosCorteCaja").innerHTML = "";

  var id_corte_caja4 =  {"id_corte_caja4": id_corte_caja3};



  $.ajax({
    data:id_corte_caja4,
    type: 'POST',
    url: 'vistas/modulos/consultas/consultaSeguimientoRetirosCorteCaja.php',
    success: function(data) {
        document.getElementById("incrustarTablaRetirosCorteCaja").innerHTML = data;
        activaTablaRetirosCorteCaja();
    }
});



});





/*Editar usuario*/
$(document).on("click", ".btnCrearRetiroCorteCaja", function(){ 

    var id_corte_caja5 = $(this).attr("id_corte_caja");
    
    $("#btnRefrescarEfectivoCRCC").val(id_corte_caja5);
    
    var suma_importes_retiros = "";
    
    var datosTotalRetiros = new FormData();
    datosTotalRetiros.append("id_corte_caja_total_retiros", id_corte_caja5);

    $.ajax({
        url: "ajax/cajas.ajax.php",
        method: "POST",
        data: datosTotalRetiros,
        cache: false,
        contentType: false,
        processData: false,
        async : false,
        dataType:"json",
        success: function(respuestaTotalRetiros){

            suma_importes_retiros = respuestaTotalRetiros["sumaImportesRetiros"];
            
            if(suma_importes_retiros == null){
             suma_importes_retiros = 0;
         }


     }

 });






    var suma_importes_retiros_baul = "";
    
    var datosTotalRetirosBaul = new FormData();
    datosTotalRetirosBaul.append("id_corte_caja_total_retiros_baul", id_corte_caja5);

    $.ajax({
        url: "ajax/cajas.ajax.php",
        method: "POST",
        data: datosTotalRetirosBaul,
        cache: false,
        contentType: false,
        processData: false,
        async : false,
        dataType:"json",
        success: function(respuestaTotalRetirosBaul){

            suma_importes_retiros_baul = respuestaTotalRetirosBaul["sumaImportesRetirosBaul"];
            
            if(suma_importes_retiros_baul == null){
             suma_importes_retiros_baul = 0;
         }


     }

 });





    var suma_importes_devoluciones = "";
    
    var datosTotalDevoluciones = new FormData();
    datosTotalDevoluciones.append("id_corte_caja_total_devoluciones", id_corte_caja5);

    $.ajax({
        url: "ajax/cajas.ajax.php",
        method: "POST",
        data: datosTotalDevoluciones,
        cache: false,
        contentType: false,
        processData: false,
        async : false,
        dataType:"json",
        success: function(respuestaTotalDevoluciones){

            suma_importes_devoluciones = respuestaTotalDevoluciones["sumaImportesDevoluciones"];
            
            if(suma_importes_devoluciones == null){
             suma_importes_devoluciones = 0;
         }


     }

 });





    var suma_importes_garantias = "";
    
    var datosTotalGarantias = new FormData();
    datosTotalGarantias.append("id_corte_caja_total_garantias", id_corte_caja5);

    $.ajax({
        url: "ajax/cajas.ajax.php",
        method: "POST",
        data: datosTotalGarantias,
        cache: false,
        contentType: false,
        processData: false,
        async : false,
        dataType:"json",
        success: function(respuestaTotalGarantias){

            suma_importes_garantias = respuestaTotalGarantias["sumaImportesGarantias"];
            
            if(suma_importes_garantias == null){
             suma_importes_garantias = 0;
         }


     }

 });



    

    var apertura = "";
    
    var datos = new FormData();
    datos.append("id_corte_caja", id_corte_caja5);

    $.ajax({
        url: "ajax/cajas.ajax.php",
        method: "POST",
        data: datos,
        cache: false,
        contentType: false,
        processData: false,
        async : false,
        dataType:"json",
        success: function(respuesta){

          apertura = respuesta["apertura"];
          
          

      }

  })
    
    
    
    
    
    var datosTotales = new FormData();
    datosTotales.append("id_corte_caja_totales", id_corte_caja5);

    $.ajax({
        url: "ajax/cajas.ajax.php",
        method: "POST",
        data: datosTotales,
        cache: false,
        contentType: false,
        processData: false,
        async : false,
        dataType:"json",
        success: function(respuestaTotales){

            var suma_efectivo_ventas = respuestaTotales["sumaEfectivoVentas"];
            
            
            
            var operacion = Number(apertura) + Number(suma_efectivo_ventas) - Number(suma_importes_retiros) - Number(suma_importes_retiros_baul) - Number(suma_importes_devoluciones) - Number(suma_importes_garantias);
            
            operacion = operacion.toFixed(2);
            
            $("#mostrarEfectivoDisponibleCRCC").val(operacion);


        }

    })

    

    $("#mostrarIdCorteCajaCRCC").val(id_corte_caja5);




})







/*=============================================
REFRESCAR EFECTIVO EN CREAR 
=============================================*/
$(document).on("click", "#btnRefrescarEfectivoCRCC", function(){

  var id_corte_caja = $(this).val();
  
  var suma_importes_retiros = "";
  
  var datosTotalRetiros = new FormData();
  datosTotalRetiros.append("id_corte_caja_total_retiros", id_corte_caja);

  $.ajax({
    url: "ajax/cajas.ajax.php",
    method: "POST",
    data: datosTotalRetiros,
    cache: false,
    contentType: false,
    processData: false,
    async : false,
    dataType:"json",
    success: function(respuestaTotalRetiros){

        suma_importes_retiros = respuestaTotalRetiros["sumaImportesRetiros"];
        
        if(suma_importes_retiros == null){
         suma_importes_retiros = 0;
     }


 }

});





  var suma_importes_retiros_baul = "";
  
  var datosTotalRetirosBaul = new FormData();
  datosTotalRetirosBaul.append("id_corte_caja_total_retiros_baul", id_corte_caja);

  $.ajax({
    url: "ajax/cajas.ajax.php",
    method: "POST",
    data: datosTotalRetirosBaul,
    cache: false,
    contentType: false,
    processData: false,
    async : false,
    dataType:"json",
    success: function(respuestaTotalRetirosBaul){

        suma_importes_retiros_baul = respuestaTotalRetirosBaul["sumaImportesRetirosBaul"];
        
        if(suma_importes_retiros_baul == null){
         suma_importes_retiros_baul = 0;
     }


 }

});





  var suma_importes_devoluciones = "";
  
  var datosTotalDevoluciones = new FormData();
  datosTotalDevoluciones.append("id_corte_caja_total_devoluciones", id_corte_caja);

  $.ajax({
    url: "ajax/cajas.ajax.php",
    method: "POST",
    data: datosTotalDevoluciones,
    cache: false,
    contentType: false,
    processData: false,
    async : false,
    dataType:"json",
    success: function(respuestaTotalDevoluciones){

        suma_importes_devoluciones = respuestaTotalDevoluciones["sumaImportesDevoluciones"];
        
        if(suma_importes_devoluciones == null){
         suma_importes_devoluciones = 0;
     }


 }

});






  var suma_importes_garantias = "";
  
  var datosTotalGarantias = new FormData();
  datosTotalGarantias.append("id_corte_caja_total_garantias", id_corte_caja);

  $.ajax({
    url: "ajax/cajas.ajax.php",
    method: "POST",
    data: datosTotalGarantias,
    cache: false,
    contentType: false,
    processData: false,
    async : false,
    dataType:"json",
    success: function(respuestaTotalGarantias){

        suma_importes_garantias = respuestaTotalGarantias["sumaImportesGarantias"];
        
        if(suma_importes_garantias == null){
         suma_importes_garantias = 0;
     }


 }

});
  

  var apertura = "";
  
  var datos = new FormData();
  datos.append("id_corte_caja", id_corte_caja);

  $.ajax({
    url: "ajax/cajas.ajax.php",
    method: "POST",
    data: datos,
    cache: false,
    contentType: false,
    processData: false,
    async : false,
    dataType:"json",
    success: function(respuesta){

      apertura = respuesta["apertura"];
      
      

  }

})
  
  
  
  
  
  var datosTotales = new FormData();
  datosTotales.append("id_corte_caja_totales", id_corte_caja);

  $.ajax({
    url: "ajax/cajas.ajax.php",
    method: "POST",
    data: datosTotales,
    cache: false,
    contentType: false,
    processData: false,
    async : false,
    dataType:"json",
    success: function(respuestaTotales){

        var suma_efectivo_ventas = respuestaTotales["sumaEfectivoVentas"];
        
        
        
        var operacion = Number(apertura) + Number(suma_efectivo_ventas) - Number(suma_importes_retiros) - Number(suma_importes_retiros_baul) - Number(suma_importes_devoluciones) - Number(suma_importes_garantias);
        
        operacion = operacion.toFixed(2);
        
        $("#mostrarEfectivoDisponibleCRCC").val(operacion);


    }

})
  
  
});





/*=============================================
VERIFICAR SI SE PUEDE HACER RETIRO O NO
=============================================*/
function verificarImporteCRCC(){


    importe = Number($("#nuevoImporteCRCC").val());

    efectivo_disponible = Number($("#mostrarEfectivoDisponibleCRCC").val());


    if (importe > efectivo_disponible){
        Swal.fire({
          icon: 'error',
          title: 'El importe es mayor al efectivo disponible, debe introducir un valor menor o igual al efectivo disponible',
          showConfirmButton: false,
          timer: 3000
      })

        $("#nuevoImporteCRCC").val("");

    }


}



/*=============================================
VERIFICAR EL IMPORTE A CADA CAMBIO
=============================================*/
$("#nuevoImporteCRCC").change(function(){

  importe = Number($("#nuevoImporteCRCC").val());

  efectivo_disponible = Number($("#mostrarEfectivoDisponibleCRCC").val());


  if (importe > efectivo_disponible){
    Swal.fire({
      icon: 'error',
      title: 'El importe es mayor al efectivo disponible, debe introducir un valor menor o igual al efectivo disponible',
      showConfirmButton: false,
      timer: 3000
  })

    $("#nuevoImporteCRCC").val("");

}


});






















$(document).on("click", ".btnVerRetirosBaulCorteCaja", function(){

  //$(".close").hide();

  $("#buscarCortesCaja").attr("teclaEsc", "no");

  var id_corte_caja = $(this).attr("id_corte_caja");
  

  var datos = new FormData();
  datos.append("id_corte_caja", id_corte_caja);

  $.ajax({
      url: "ajax/cajas.ajax.php",
      method: "POST",
      data: datos,
      cache: false,
      contentType: false,
      processData: false,
      async : false,
      dataType:"json",
      success: function(respuesta){

        if (respuesta["estatus"] == 1) {
          $(".btnCrearRetiroBaulCorteCaja").attr("disabled", true);
      }

  }

});
  
  
  
  var datosTotalRetiros = new FormData();
  datosTotalRetiros.append("id_corte_caja_total_retiros", id_corte_caja);
  
  
  var suma_importes_retiros = "";
  
  $.ajax({
    url: "ajax/cajas.ajax.php",
    method: "POST",
    data: datosTotalRetiros,
    cache: false,
    contentType: false,
    processData: false,
    async : false,
    dataType:"json",
    success: function(respuestaTotalRetiros){

        suma_importes_retiros = respuestaTotalRetiros["sumaImportesRetiros"];
        
        if(suma_importes_retiros == null){
         suma_importes_retiros = 0;
     }

     $("#totalRetirosVRBCC").val(suma_importes_retiros);


 }



});






  var datosTotalRetirosBaul = new FormData();
  datosTotalRetirosBaul.append("id_corte_caja_total_retiros_baul", id_corte_caja);
  
  
  var suma_importes_retiros_baul = "";
  
  $.ajax({
    url: "ajax/cajas.ajax.php",
    method: "POST",
    data: datosTotalRetirosBaul,
    cache: false,
    contentType: false,
    processData: false,
    async : false,
    dataType:"json",
    success: function(respuestaTotalRetirosBaul){

        suma_importes_retiros_baul = respuestaTotalRetirosBaul["sumaImportesRetirosBaul"];
        
        if(suma_importes_retiros_baul == null){
         suma_importes_retiros_baul = 0;
     }

     $("#totalRetirosBaulVRBCC").val(suma_importes_retiros_baul);


 }



});





  var datosTotalDevoluciones = new FormData();
  datosTotalDevoluciones.append("id_corte_caja_total_devoluciones", id_corte_caja);
  
  
  var suma_importes_devoluciones = "";
  
  $.ajax({
    url: "ajax/cajas.ajax.php",
    method: "POST",
    data: datosTotalDevoluciones,
    cache: false,
    contentType: false,
    processData: false,
    async : false,
    dataType:"json",
    success: function(respuestaTotalDevoluciones){

        suma_importes_devoluciones = respuestaTotalDevoluciones["sumaImportesDevoluciones"];
        
        if(suma_importes_devoluciones == null){
         suma_importes_devoluciones = 0;
     }

     $("#totalDevolucionesVRBCC").val(suma_importes_devoluciones);


 }



});





  var datosTotalGarantias = new FormData();
  datosTotalGarantias.append("id_corte_caja_total_garantias", id_corte_caja);
  
  
  var suma_importes_garantias = "";
  
  $.ajax({
    url: "ajax/cajas.ajax.php",
    method: "POST",
    data: datosTotalGarantias,
    cache: false,
    contentType: false,
    processData: false,
    async : false,
    dataType:"json",
    success: function(respuestaTotalGarantias){

        suma_importes_garantias = respuestaTotalGarantias["sumaImportesGarantias"];
        
        if(suma_importes_garantias == null){
         suma_importes_garantias = 0;
     }

     $("#totalGarantiasVRBCC").val(suma_importes_garantias);


 }



});
  


  var apertura = "";

  var datos = new FormData();
  datos.append("id_corte_caja", id_corte_caja);

  $.ajax({
    url: "ajax/cajas.ajax.php",
    method: "POST",
    data: datos,
    cache: false,
    contentType: false,
    processData: false,
    async : false,
    dataType:"json",
    success: function(respuesta){

      apertura = respuesta["apertura"];
      
      $("#mostrarAperturaVRBCC").val(respuesta["apertura"]);
      
      

  }

})
  
  
  
  
  
  var datosTotales = new FormData();
  datosTotales.append("id_corte_caja_totales", id_corte_caja);

  $.ajax({
    url: "ajax/cajas.ajax.php",
    method: "POST",
    data: datosTotales,
    cache: false,
    contentType: false,
    processData: false,
    async : false,
    dataType:"json",
    success: function(respuestaTotales){

        var suma_efectivo_ventas = respuestaTotales["sumaEfectivoVentas"];
        
        
        var operacion = Number(apertura) + Number(suma_efectivo_ventas) - Number(suma_importes_retiros) - Number(suma_importes_retiros_baul) - Number(suma_importes_devoluciones) - Number(suma_importes_garantias);
        
        operacion = operacion.toFixed(2);
        
        $("#mostrarEfectivoDisponible2").val(operacion);


    }

})

  

  $("#mostrarIdCorteCajaVRBCC").val(id_corte_caja);
  
  $(".btnCrearRetiroBaulCorteCaja").attr("id_corte_caja",id_corte_caja);

  document.getElementById("incrustarTablaRetirosBaulCorteCaja").innerHTML = "";

  var id_corte_caja =  {"id_corte_caja": id_corte_caja};



  $.ajax({
    data:id_corte_caja,
    type: 'POST',
    url: 'vistas/modulos/consultas/consultaRetirosBaulCorteCaja.php',
    success: function(data) {
        document.getElementById("incrustarTablaRetirosBaulCorteCaja").innerHTML = data;
        activaTablaRetirosBaulCorteCaja();
    }
});



});





/*Editar usuario*/
$(document).on("click", ".btnCrearRetiroBaulCorteCaja", function(){ 

    var id_corte_caja = $(this).attr("id_corte_caja");
    
    $("#btnRefrescarEfectivoCRBCC").val(id_corte_caja);
    
    var suma_importes_retiros = "";
    
    var datosTotalRetiros = new FormData();
    datosTotalRetiros.append("id_corte_caja_total_retiros", id_corte_caja);

    $.ajax({
        url: "ajax/cajas.ajax.php",
        method: "POST",
        data: datosTotalRetiros,
        cache: false,
        contentType: false,
        processData: false,
        async : false,
        dataType:"json",
        success: function(respuestaTotalRetiros){

            suma_importes_retiros = respuestaTotalRetiros["sumaImportesRetiros"];
            
            if(suma_importes_retiros == null){
             suma_importes_retiros = 0;
         }


     }

 });





    var suma_importes_retiros_baul = "";
    
    var datosTotalRetirosBaul = new FormData();
    datosTotalRetirosBaul.append("id_corte_caja_total_retiros_baul", id_corte_caja);

    $.ajax({
        url: "ajax/cajas.ajax.php",
        method: "POST",
        data: datosTotalRetirosBaul,
        cache: false,
        contentType: false,
        processData: false,
        async : false,
        dataType:"json",
        success: function(respuestaTotalRetirosBaul){

            suma_importes_retiros_baul = respuestaTotalRetirosBaul["sumaImportesRetirosBaul"];
            
            if(suma_importes_retiros_baul == null){
             suma_importes_retiros_baul = 0;
         }


     }

 });





    var suma_importes_devoluciones = "";
    
    var datosTotalDevoluciones = new FormData();
    datosTotalDevoluciones.append("id_corte_caja_total_devoluciones", id_corte_caja);

    $.ajax({
        url: "ajax/cajas.ajax.php",
        method: "POST",
        data: datosTotalDevoluciones,
        cache: false,
        contentType: false,
        processData: false,
        async : false,
        dataType:"json",
        success: function(respuestaTotalDevoluciones){

            suma_importes_devoluciones = respuestaTotalDevoluciones["sumaImportesDevoluciones"];
            
            if(suma_importes_devoluciones == null){
             suma_importes_devoluciones = 0;
         }


     }

 });





    var suma_importes_garantias = "";
    
    var datosTotalGarantias = new FormData();
    datosTotalGarantias.append("id_corte_caja_total_garantias", id_corte_caja);

    $.ajax({
        url: "ajax/cajas.ajax.php",
        method: "POST",
        data: datosTotalGarantias,
        cache: false,
        contentType: false,
        processData: false,
        async : false,
        dataType:"json",
        success: function(respuestaTotalGarantias){

            suma_importes_garantias = respuestaTotalGarantias["sumaImportesGarantias"];
            
            if(suma_importes_garantias == null){
             suma_importes_garantias = 0;
         }


     }

 });



    

    var apertura = "";
    
    var datos = new FormData();
    datos.append("id_corte_caja", id_corte_caja);

    $.ajax({
        url: "ajax/cajas.ajax.php",
        method: "POST",
        data: datos,
        cache: false,
        contentType: false,
        processData: false,
        async : false,
        dataType:"json",
        success: function(respuesta){

          apertura = respuesta["apertura"];
          
          

      }

  })
    
    
    
    
    
    var datosTotales = new FormData();
    datosTotales.append("id_corte_caja_totales", id_corte_caja);

    $.ajax({
        url: "ajax/cajas.ajax.php",
        method: "POST",
        data: datosTotales,
        cache: false,
        contentType: false,
        processData: false,
        async : false,
        dataType:"json",
        success: function(respuestaTotales){

            var suma_efectivo_ventas = respuestaTotales["sumaEfectivoVentas"];
            
            
            
            var operacion = Number(apertura) + Number(suma_efectivo_ventas) - Number(suma_importes_retiros) - Number(suma_importes_retiros_baul) - Number(suma_importes_devoluciones) - Number(suma_importes_garantias);
            
            operacion = operacion.toFixed(2);
            
            $("#mostrarEfectivoDisponibleCRBCC").val(operacion);


        }

    })

    

    $("#mostrarIdCorteCajaCRBCC").val(id_corte_caja);




})







/*=============================================
REFRESCAR EFECTIVO EN CREAR 
=============================================*/
$(document).on("click", "#btnRefrescarEfectivoCRBCC", function(){

  var id_corte_caja = $(this).val();
  
  var suma_importes_retiros = "";
  
  var datosTotalRetiros = new FormData();
  datosTotalRetiros.append("id_corte_caja_total_retiros", id_corte_caja);

  $.ajax({
    url: "ajax/cajas.ajax.php",
    method: "POST",
    data: datosTotalRetiros,
    cache: false,
    contentType: false,
    processData: false,
    async : false,
    dataType:"json",
    success: function(respuestaTotalRetiros){

        suma_importes_retiros = respuestaTotalRetiros["sumaImportesRetiros"];
        
        if(suma_importes_retiros == null){
         suma_importes_retiros = 0;
     }


 }

});





  var suma_importes_retiros_baul = "";
  
  var datosTotalRetirosBaul = new FormData();
  datosTotalRetirosBaul.append("id_corte_caja_total_retiros_baul", id_corte_caja);

  $.ajax({
    url: "ajax/cajas.ajax.php",
    method: "POST",
    data: datosTotalRetirosBaul,
    cache: false,
    contentType: false,
    processData: false,
    async : false,
    dataType:"json",
    success: function(respuestaTotalRetirosBaul){

        suma_importes_retiros_baul = respuestaTotalRetirosBaul["sumaImportesRetirosBaul"];
        
        if(suma_importes_retiros_baul == null){
         suma_importes_retiros_baul = 0;
     }


 }

});





  var suma_importes_devoluciones = "";
  
  var datosTotalDevoluciones = new FormData();
  datosTotalDevoluciones.append("id_corte_caja_total_devoluciones", id_corte_caja);

  $.ajax({
    url: "ajax/cajas.ajax.php",
    method: "POST",
    data: datosTotalDevoluciones,
    cache: false,
    contentType: false,
    processData: false,
    async : false,
    dataType:"json",
    success: function(respuestaTotalDevoluciones){

        suma_importes_devoluciones = respuestaTotalDevoluciones["sumaImportesDevoluciones"];
        
        if(suma_importes_devoluciones == null){
         suma_importes_devoluciones = 0;
     }


 }

});






  var suma_importes_garantias = "";
  
  var datosTotalGarantias = new FormData();
  datosTotalGarantias.append("id_corte_caja_total_garantias", id_corte_caja);

  $.ajax({
    url: "ajax/cajas.ajax.php",
    method: "POST",
    data: datosTotalGarantias,
    cache: false,
    contentType: false,
    processData: false,
    async : false,
    dataType:"json",
    success: function(respuestaTotalGarantias){

        suma_importes_garantias = respuestaTotalGarantias["sumaImportesGarantias"];
        
        if(suma_importes_garantias == null){
         suma_importes_garantias = 0;
     }


 }

});
  

  var apertura = "";
  
  var datos = new FormData();
  datos.append("id_corte_caja", id_corte_caja);

  $.ajax({
    url: "ajax/cajas.ajax.php",
    method: "POST",
    data: datos,
    cache: false,
    contentType: false,
    processData: false,
    async : false,
    dataType:"json",
    success: function(respuesta){

      apertura = respuesta["apertura"];
      
      

  }

})
  
  
  
  
  
  var datosTotales = new FormData();
  datosTotales.append("id_corte_caja_totales", id_corte_caja);

  $.ajax({
    url: "ajax/cajas.ajax.php",
    method: "POST",
    data: datosTotales,
    cache: false,
    contentType: false,
    processData: false,
    async : false,
    dataType:"json",
    success: function(respuestaTotales){

        var suma_efectivo_ventas = respuestaTotales["sumaEfectivoVentas"];
        
        
        
        var operacion = Number(apertura) + Number(suma_efectivo_ventas) - Number(suma_importes_retiros) - Number(suma_importes_retiros_baul) - Number(suma_importes_devoluciones) - Number(suma_importes_garantias);
        
        operacion = operacion.toFixed(2);
        
        $("#mostrarEfectivoDisponibleCRBCC").val(operacion);


    }

})
  
  
});





/*=============================================
VERIFICAR SI SE PUEDE HACER RETIRO O NO
=============================================*/
function verificarImporteCRCC(){


    importe = Number($("#nuevoImporteCRBCC").val());

    efectivo_disponible = Number($("#mostrarEfectivoDisponibleCRBCC").val());


    if (importe > efectivo_disponible){
        Swal.fire({
          icon: 'error',
          title: 'El importe es mayor al efectivo disponible, debe introducir un valor menor o igual al efectivo disponible',
          showConfirmButton: false,
          timer: 3000
      })

        $("#nuevoImporteCRBCC").val("");

    }


}



/*=============================================
VERIFICAR EL IMPORTE A CADA CAMBIO
=============================================*/
$("#nuevoImporteCRBCC").change(function(){

  verificarImporteCRCC();


});




















/*=============================================
CALCULO CINCUENTA CENTAVOS
=============================================*/
$("#cantidadCentavos").change(function(){

  var cantidadCentavos = $(this).val();

  var operacion = cantidadCentavos * 0.5;

  $("#totalCentavos").val(operacion);

  calcularEfectivo();

});




/*=============================================
CALCULO UN PESO
=============================================*/
$("#cantidadUnPeso").change(function(){

  var cantidadUnPeso = $(this).val();

  var operacion = cantidadUnPeso * 1;

  $("#totalUnPeso").val(operacion);

  calcularEfectivo();

});





/*=============================================
CALCULO DOS PESOS
=============================================*/
$("#cantidadDosPesos").change(function(){

  var cantidadDosPesos = $(this).val();

  var operacion = cantidadDosPesos * 2;

  $("#totalDosPesos").val(operacion);

  calcularEfectivo();

});





/*=============================================
CALCULO CINCO PESOS
=============================================*/
$("#cantidadCincoPesos").change(function(){

  var cantidadCincoPesos = $(this).val();

  var operacion = cantidadCincoPesos * 5;

  $("#totalCincoPesos").val(operacion);

  calcularEfectivo();

});





/*=============================================
CALCULO DIEZ PESOS
=============================================*/
$("#cantidadDiezPesos").change(function(){

  var cantidadDiezPesos = $(this).val();

  var operacion = cantidadDiezPesos * 10;

  $("#totalDiezPesos").val(operacion);

  calcularEfectivo();

});





/*=============================================
CALCULO VEINTE PESOS
=============================================*/
$("#cantidadVeintePesos").change(function(){

  var cantidadVeintePesos = $(this).val();

  var operacion = cantidadVeintePesos * 20;

  $("#totalVeintePesos").val(operacion);

  calcularEfectivo();

});





/*=============================================
CALCULO CINCUENTA PESOS
=============================================*/
$("#cantidadCincuentaPesos").change(function(){

  var cantidadCincuentaPesos = $(this).val();

  var operacion = cantidadCincuentaPesos * 50;

  $("#totalCincuentaPesos").val(operacion);

  calcularEfectivo();

});





/*=============================================
CALCULO CIEN PESOS
=============================================*/
$("#cantidadCienPesos").change(function(){

  var cantidadCienPesos = $(this).val();

  var operacion = cantidadCienPesos * 100;

  $("#totalCienPesos").val(operacion);

  calcularEfectivo();

});





/*=============================================
CALCULO DOSCIENTOS PESOS
=============================================*/
$("#cantidadDoscientosPesos").change(function(){

  var cantidadDoscientosPesos = $(this).val();

  var operacion = cantidadDoscientosPesos * 200;

  $("#totalDoscientosPesos").val(operacion);

  calcularEfectivo();

});





/*=============================================
CALCULO QUINIENTOS PESOS
=============================================*/
$("#cantidadQuinientosPesos").change(function(){

  var cantidadQuinientosPesos = $(this).val();

  var operacion = cantidadQuinientosPesos * 500;

  $("#totalQuinientosPesos").val(operacion);

  calcularEfectivo();

});





/*=============================================
CALCULO MIL PESOS
=============================================*/
$("#cantidadMilPesos").change(function(){

  var cantidadMilPesos = $(this).val();

  var operacion = cantidadMilPesos * 1000;

  $("#totalMilPesos").val(operacion);

  calcularEfectivo();

});




function calcularEfectivo()
{
  var totalCentavos = $("#totalCentavos").val();
  var totalUnPeso = $("#totalUnPeso").val();
  var totalDosPesos = $("#totalDosPesos").val();
  var totalCincoPesos = $("#totalCincoPesos").val();
  var totalDiezPesos = $("#totalDiezPesos").val();
  var totalVeintePesos = $("#totalVeintePesos").val();
  var totalCincuentaPesos = $("#totalCincuentaPesos").val();
  var totalCienPesos = $("#totalCienPesos").val();
  var totalDoscientosPesos = $("#totalDoscientosPesos").val();
  var totalQuinientosPesos = $("#totalQuinientosPesos").val();
  var totalMilPesos = $("#totalMilPesos").val(); 

  var suma = Number(totalCentavos) + Number(totalUnPeso) + Number(totalDosPesos) + Number(totalCincoPesos) + Number(totalDiezPesos) + Number(totalVeintePesos) + Number(totalCincuentaPesos) + Number(totalCienPesos) + Number(totalDoscientosPesos) + Number(totalQuinientosPesos) + Number(totalMilPesos);

  $("#totalEfectivo").val(suma).number(true, 2);      
}

function calcularTotalesEfectivo(){
  var cantidadCentavos = $("#cantidadCentavos").val();
  var cantidadUnPeso = $("#cantidadUnPeso").val();
  var cantidadDosPesos = $("#cantidadDosPesos").val();
  var cantidadCincoPesos = $("#cantidadCincoPesos").val();
  var cantidadDiezPesos = $("#cantidadDiezPesos").val();
  var cantidadVeintePesos = $("#cantidadVeintePesos").val();
  var cantidadCincuentaPesos = $("#cantidadCincuentaPesos").val();
  var cantidadCienPesos = $("#cantidadCienPesos").val();
  var cantidadDoscientosPesos = $("#cantidadDoscientosPesos").val();
  var cantidadQuinientosPesos = $("#cantidadQuinientosPesos").val();
  var cantidadMilPesos = $("#cantidadMilPesos").val();

  var totalCentavos = cantidadCentavos * 0.5;
  var totalUnPeso = cantidadUnPeso * 1;
  var totalDosPesos = cantidadDosPesos * 2;
  var totalCincoPesos = cantidadCincoPesos * 5;
  var totalDiezPesos = cantidadDiezPesos * 10;
  var totalVeintePesos = cantidadVeintePesos * 20;
  var totalCincuentaPesos = cantidadCincuentaPesos * 50;
  var totalCienPesos = cantidadCienPesos * 100;
  var totalDoscientosPesos = cantidadDoscientosPesos * 200;
  var totalQuinientosPesos = cantidadQuinientosPesos * 500;
  var totalMilPesos = cantidadMilPesos * 1000;


  $("#totalCentavos").val(totalCentavos);
  $("#totalUnPeso").val(totalUnPeso);
  $("#totalDosPesos").val(totalDosPesos);
  $("#totalCincoPesos").val(totalCincoPesos);
  $("#totalDiezPesos").val(totalDiezPesos);
  $("#totalVeintePesos").val(totalVeintePesos);
  $("#totalCincuentaPesos").val(totalCincuentaPesos);
  $("#totalCienPesos").val(totalCienPesos);
  $("#totalDoscientosPesos").val(totalDoscientosPesos);
  $("#totalQuinientosPesos").val(totalQuinientosPesos);
  $("#totalMilPesos").val(totalMilPesos);
}










$(document).on("click", ".btnEliminarRetiroCorteCaja", function(){
    var id_retiro = $(this).attr("id_retiro");
    var id_corte_caja = $(".btnCrearRetiroCorteCaja").attr("id_corte_caja");
    Swal.fire({
      title: 'Estas segur@?',
      text: "Quieres eliminar este gasto?",
      icon: 'warning',
      showCancelButton: true,
      confirmButtonColor: '#3085d6',
      cancelButtonColor: '#d33',
      confirmButtonText: 'Si'
    }).then(function(result){

        if(result.value){
            var datos = new FormData();
            datos.append("eliminarRetiro", id_retiro);
            datos.append("columna", "estatus");
            datos.append("valor", 1);

            $.ajax({
                url: "ajax/cajas.ajax.php",
                method: "POST",
                data: datos,
                cache: false,
                contentType: false,
                processData: false,
                success: function(respuesta){
                    Swal.fire({
                    icon: 'success',
                    title: 'El gasto se ha eliminado con éxito',
                    showConfirmButton: true
                    }).then(function(result){
                        window.location = 'caja';
                        });
                }
            });
        }
    });
});










$(document).on("click", ".btnEliminarRetiroBaulCorteCaja", function(){
    var id_retiro_baul = $(this).attr("id_retiro_baul");
    var id_corte_caja = $(".btnCrearRetiroCorteCaja").attr("id_corte_caja");
    Swal.fire({
      title: 'Estas segur@?',
      text: "Quieres eliminar este retiro para baúl?",
      icon: 'warning',
      showCancelButton: true,
      confirmButtonColor: '#3085d6',
      cancelButtonColor: '#d33',
      confirmButtonText: 'Si'
    }).then(function(result){

        if(result.value){
            var datos = new FormData();
            datos.append("eliminarRetiroBaul", id_retiro_baul);
            datos.append("columna", "estatus");
            datos.append("valor", 1);

            $.ajax({
                url: "ajax/cajas.ajax.php",
                method: "POST",
                data: datos,
                cache: false,
                contentType: false,
                processData: false,
                success: function(respuesta){
                    Swal.fire({
                    icon: 'success',
                    title: 'El retiro para baúl se ha eliminado con éxito',
                    showConfirmButton: true
                    }).then(function(result){
                        window.location = 'caja';
                        });
                }
            });
        }
    });
});










$(document).on("click", ".btnMostrarPDF", function(){


    var ruta = $(this).val();


    $('#mostrarPDF').modal('show');
    let div = document.getElementById("PDF");
    div.innerHTML = '<embed type="application/pdf"'+ 
    'src="'+ruta+'"'+
    'width="475"'+ 
    'height="475"'+  
    'frameborder="0"'+
    'quality="high">';

});











$(document).on("click", ".btnReimprimirTicketRetiroCorteCaja", function(){ 

    var id_retiro = $(this).attr("id_retiro");

    $("#reimprimir_ticket_retiro_corte_caja").val(id_retiro);


    $("#modalReimprimirTicketRetiroCorteCaja").modal("show");

    setTimeout(function() { 
        $("#btnNoReimprimirTicketRetiroCorteCaja").focus();
    }, 150);


});










$(document).on("click", ".btnReimprimirTicketRetiroBaulCorteCaja", function(){ 

    var id_retiro_baul = $(this).attr("id_retiro_baul");

    $("#reimprimir_ticket_retiro_baul_corte_caja").val(id_retiro_baul);


    $("#modalReimprimirTicketRetiroBaulCorteCaja").modal("show");

    setTimeout(function() { 
        $("#btnNoReimprimirTicketRetiroBaulCorteCaja").focus();
    }, 150);


});










$(document).on("click", ".btnReimprimirTicketCorteCaja", function(){ 

    var id_corte_caja = $(this).attr("id_corte_caja");

    $("#reimprimir_ticket_corte_caja").val(id_corte_caja);


    $("#modalReimprimirTicketCorteCaja").modal("show");

    setTimeout(function() { 
        $("#btnNoReimprimirTicketCorteCaja").focus();
    }, 150);


});










/*=============================================
CONFIRMAR CORTE CAJA
=============================================*/
$(document).on("click", ".btnVerVentasCorteCaja", function(){

    //$(".close").hide();

  $("#buscarCortesCaja").attr("teclaEsc", "no");

   var id_corte_caja = $(this).attr("id_corte_caja");

   var datos =  {"id_corte_caja": id_corte_caja};


   $.ajax({
           data:datos,
           type: 'POST',
           url: 'vistas/modulos/consultas/consultaVentasCorteCaja.php',
           success: function(data) {

           $("#modalVentasCorteCaja").modal("show");

           document.getElementById("incrustarTablaVentasCorteCaja").innerHTML = data;
           activaTablaVentasCorteCaja();
           }
           });

});










/*=============================================
DEVOLUCIONES CORTE CAJA
=============================================*/
$(document).on("click", ".btnVerDevolucionesCorteCaja", function(){

    //$(".close").hide();

  $("#buscarCortesCaja").attr("teclaEsc", "no");

   var id_corte_caja = $(this).attr("id_corte_caja");

   document.getElementById("incrustarTablaDevolucionesCorteCaja").innerHTML = "";

   var datos =  {"id_corte_caja": id_corte_caja};


   $.ajax({
           data:datos,
           type: 'POST',
           url: 'vistas/modulos/consultas/consultaDevolucionesCorteCaja.php',
           success: function(data) {

           $("#modalDevolucionesCorteCaja").modal("show");

           document.getElementById("incrustarTablaDevolucionesCorteCaja").innerHTML = data;
           activaTablaDevolucionesCorteCaja();
           }
           });

});










/*=============================================
GARANTIAS CORTE CAJA
=============================================*/
$(document).on("click", ".btnVerGarantiasCorteCaja", function(){

    //$(".close").hide();

  $("#buscarCortesCaja").attr("teclaEsc", "no");

   var id_corte_caja = $(this).attr("id_corte_caja");

   document.getElementById("incrustarTablaGarantiasCorteCaja").innerHTML = "";

   var datos =  {"id_corte_caja": id_corte_caja};


   $.ajax({
           data:datos,
           type: 'POST',
           url: 'vistas/modulos/consultas/consultaGarantiasCorteCaja.php',
           success: function(data) {

           $("#modalGarantiasCorteCaja").modal("show");

           document.getElementById("incrustarTablaGarantiasCorteCaja").innerHTML = data;
           activaTablaGarantiasCorteCaja();
           }
           });

});









/*=============================================
        IMPRIMIR NOTA
        =============================================*/
        $(document).on("click", "#btnExportarEXCELVentasCorteCaja", function(){

                var id_corte_caja = $(this).attr("id_corte_caja");

                if(id_corte_caja == ""){
                  return;
                }else if(id_corte_caja !== ""){
                  //alert(no_rango);

                window.open("vistas/modulos/exportesExcel/excel-ventas-corte-caja.php?id_corte_caja="+id_corte_caja, "_blank");

                }


                
        });










        /*=============================================
        EXPORTAR DEVOLUCIONES CORTE CAJA
        =============================================*/
        $(document).on("click", "#btnExportarEXCELDevolucionesCorteCaja", function(){

                var id_corte_caja = $(this).attr("id_corte_caja");

                if(id_corte_caja == ""){
                  return;
                }else if(id_corte_caja !== ""){
                  //alert(no_rango);

                window.open("vistas/modulos/exportesExcel/excel-devoluciones-corte-caja.php?id_corte_caja="+id_corte_caja, "_blank");

                }


                
        });







        /*=============================================
        EXPORTAR DEVOLUCIONES CORTE CAJA
        =============================================*/
        $(document).on("click", "#btnExportarEXCELGarantiasCorteCaja", function(){

                var id_corte_caja = $(this).attr("id_corte_caja");

                if(id_corte_caja == ""){
                  return;
                }else if(id_corte_caja !== ""){
                  //alert(no_rango);

                window.open("vistas/modulos/exportesExcel/excel-garantias-corte-caja.php?id_corte_caja="+id_corte_caja, "_blank");

                }


                
        });